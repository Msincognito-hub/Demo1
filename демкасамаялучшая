адреса проверить: 192.168.1.1-254 / 255.255.255.0 (ЦО); 10.10.10.129-190 / 255.255.255.192 (филиал); 
                  172.110.110.193-254 /255.255.255.192 (офис сеть 2 или 3 сеть); 203.73.66.0-254 / 255.255.255.0 (интернет для координаторов).
                 !!!!!!!!!!ПРОВЕРИТЬ И ВНИМАТЕЛЬНО ПРОЧИТАТЬ ПАРОЛЯ ДЛЯ ПОЛЬЗОВАТЕЛЕЙ!!!!!!!!!
Отключить Firewall, настроить IPv4, включить сетевое обнаружение и откатить дату на 1 год, накатить C++
    1) Установить БД на net1 open 
    2) Установить ЦУС сервер net1 admin(установить через powershell команда start путь до установщика.MSI)
    3) Установить ЦУС клиент net1 open(установить через powershell команда start путь до установщика.MSI)
    4) Установить УКЦ net1 admin  (vipnet a7r/ soft/_____/setup)
    5) Установить VIPnet Client net1 Admin (vipnet c5/ soft/client r)(после перезагрузки не забываем выставить дату)
(Пункт установки 1-5 нажимаем везде продолжить и установить)
    6) Настройка Net 1 Coord(откатить год 2023)
    7) Установить на Net1 operCA (установить с++, дату, отключить firewall, обнаружение и установить IP)
    I. VIPnet Client (vipnet c5/ soft/client r)(поле перезагрузки выставляем дату)
    II. Publication service (vipnet p6/____/soft/setup)
    III. Registration Point (VIPnet r629/________/soft/ setup)
    IV. CA informing(vipnet c/ ca inform)
(Подпункт 1-4 установки 7 нажимаем везде продолжить и установить)
    8) Настроить Net 2 coord net2 client (установить с++, дату, отключить firewall, обнаружение и установить IP, поменять сетевой адаптер на net2) установить VIPnet client 
    9) Инициализация УКЦ на net1 admin
    I. Заходим в УКЦ
    II. Настройка новой БД
    III. Нажимаем далее и указываем IP SQL(net1 open) имя бд по умолчанию
    IV. По имени и паролю (sa xxXX1234) !!!ПОСМОТРЕТЬ ПАРОЛИ В ЗАДАНИИ!!!
    V. Нажимаем «Далее» до раздела «Настройка паролей» и ставим галочку собственный пароль
    VI. Вписываем пароль 
    VII. Нажимаем «Далее» до конца 
    10) Создаем структуру ЦУС на NET1 open
    I. Переходим в раздел «координаторы» и создаем 2 координатора(1- координатор центр офис, 2- координатор филиала)(одноименного пользователя создавать не нужно)(галочка «Выполняет функции VPN-сервера)
    II. Переходим в свойства созданных координаторов и во вкладке «Роли узла» удаляем все роли и добавляем новую роль (Coordinator HW-VA)
    III. В свойствах координаторов переходим во вкладку межсерверный канал и настраиваем его (добавляем другой коорд.)
    IV. Переходим во вкладку «Клиент» и создаем 3 клиента (Главный администратор(корд центр офис), Оператор УЦ(корд центр офис), Пользователь_2 Филиал(корд филиала)) убрать галку с «создать одноименного пользователя»
    V. Переходим во вкладку «пользователи» и создаем пользователей для координаторов и клиентов(Admin, Operator, user2, coord ЦО, Филиал)
    VI. Переходим в свойства пользователей и устанавливаем связь в соответствии с таблицей в задании 

Связи пользователей:

Координатор Центр Офис: с админом, оператором и координатором филиала;
Админ: с координатором Центр Офис, оператором и пользователем филиала;
Оператор: с центральным координатором, админом и координатором филиала;
Координатор Филиала: с центральным координатором, оператором и пользователем филиала;
Пользователь филиала: с админом и координатором филиала.


    VII. Если требуется по заданию выгрузка HTML структуры, то переходим в раздел «Моя сеть» - «Сохранить отчёт о структуре сети в файл» и сохраняем на рабочий стол выбирая тип файла HTML
    VIII. Для создания справочника переходим в раздел «Моя сеть» и выбираем вкладку «создать справочник» и нажимаем кнопку «для всего списка»
    11) Далее переходим в УКЦ на NET1 Admin в раздел «Сетевые узлы» выделяем все узлы ПКМ и «выдать новый дистрибутив ключей», в открывшейся вкладке нажимаем «далее» до ввода пароля, вводим пароль и нажимаем снова «далее» до самого конца(процесс повторяется 5 раз)
    12) После выдачи ключей можно провести первичную инициализацию всех клиентов и координаторов, для этого скидываем на флэшку ключи и переходим на соответствующую машину.
1) Переходим на net1 coord, монтируем флешку к вирт. Машине и выбираем считывание ключей с usb, выбираем ключ коорд центр офис
настраиваем только два адаптера eth0 и eth1
2)выбираем yes при настройки интерфейса, но не используем dhcp 
все ip выставляем в соответствии с заданием.
3)После Настройки интерфейсов подойдет выбор default gateway(прописываем ip net2 coord)
3)Далее DNS и NTP не включаем 
4) Соглашаемся со всем и доходим до virtual ip, принимаем и выставляем диапазон 
5)при выборе vpn-connection отказываемся, при выборе vpn services соглашаемся  
    13) При установки ключей на VIPnet clien на net1Admin ставим ключи от Администратора (документ) ЗАДАНИЕ
    14) При установки ключей на VIPnet clien на net1OperCA ставим ключи от Оператора (документ) ЗАДАНИЕ
    15) Больше ключи не выдаем 
    16) Входим на VIPnet client net1Admin и net1operCA Net2Client разрешаем работу с сетью, если есть проблема с элек. Подписью нажимаем «напомнить позже»
    17) После того, как вы установили ViPNet Client на ВМ с серверным ЦУС, вам нужно будет разрешить подключение к БД, т.к. клиент блокирует все входящие и исходящие подключения.
 1)Заходим в «сетевые фильтры» «фильтры открытой сети» и  «создать»
 2)Возле вкладки «Действие» ставим галочку «пропускать трафик» и «ок»
 Данные действия проделываем на Net1Admin и net1operCA
 3)заходим в «защищенная сеть» и проверяем работу с оператором и координатором(если связи с координатором нет то открываем его, переходим в раздел с ip адресом и добавляем ip координатора и применяем )


Заполнение координатора:

Заходим в настройки виртуальной машин координатора → опции → Vmware Tools → отключаем синхронизацию времени (каждый раз после перезагрузки, заполнения адресов и включения координатора нужно проверять этот компонент. Он должен быть отключен, иначе все сломается).

IP-адреса:
Заполняем адреса строго по настройкам виртуальной машины:

Коорд1:

eth0: 1.2.3.5 255.255.255.240 (net1) 192.168.1.5 /0
eth1: 2.3.4.5 255.255.255.224 (net2) 10.10.10.135 /192
eth2: 8.9.10.1 255.255.255.0 (inet) 203.73.66.1 /0
eth3: n
default: 8.9.10.2 255.255.255.0 (...) 203.73.66.2/0
DNS-сервер: n
synchronize the time: n
далее просто пробел (спрашивается про название координатора, менять не обязательно)
далее: no \ no \ yes \ yes 
Координатор запускает все службы и адреса.


Коорд2:

eth0: 2.3.4.5 255.255.255.224 (net2) 10.10.10.135 /192
eth1: 1.2.3.5 255.255.255.240 (net1) 192.168.1.5 /0
eth2: 8.9.10.2 255.255.255.0 (inet) 203.73.66.2/0
eth3: n
default: 8.9.10.1 255.255.255.0 (...) 203.73.66.1 /0
DNS-сервер: n
synchronize the time: n
далее просто пробел (спрашивается про название координатора, менять не обязательно)
далее: no \ no \ yes \ yes 
Координатор запускает все службы и адреса.

________________________

УКЦ перевести в аккредитованный режим!!!

МОДУЛЬ С СЕРВИСОМ ПУБЛИКАЦИЙ

Заходим в установленный клиент, используем дистрибутив ключей 
сетевого узла OperCA на котором стоит роль «Registration Point». В окне 
выбора выбираем «ViPNet Registration Point». При появлении ошибки следует
изменить каталог, кликаем на значок рядом с «Настройки», выбираем пункт 
«Папка ключей сетевого узла» и меняем на путь к идентификатору узла 
C:\ProgramData\Infotecs\<идентификатор сетевого узла >

Ошибка должна пропасть, а окно с программой открыться.

Нажимаем в левом углу «Зарегистрировать пользователя». После 
регистрации нажимаем на нашего пользователя ПКМ «Сертификаты» →
«Создать запрос». После создания запроса переходим в «Запросы» →
«Запросы на сертификаты» → «Отправленные». Находим наш сертификат, 
нажимаем дважды ЛКМ и заходим в «Статус».

Следим за нашим статусом, после того как статус станет «доставлен» 
переходим в УКЦ и удовлетворяем запрос. Тыкаем на сертификат и нажимаем 
«Удовлетворить» → «Да».

Ожидаем некоторое время, когда наш сертификат станет действующим в 
ViPNet Registration Point. После чего, аннулируем наш действующий 
сертификат. Переходим в «Сертификаты», находим наш сертификат, ПКМ 
«Аннулировать» → «Да». Переходим в «Запросы на аннулирование» и следим.

В УКЦ заходим в «Запросы на аннулирование сертификатов» →
«Необработанные запросы». Выбираем наш сертификат и нажимаем 
«Удовлетворить» → «Да».

Заходим в ранее установленный CA Informing на ВМ Net1-AdminCA. 
Для начала настроим его, нажимаем «Действия» → «Настройки».

После заполнения нажимаем «ОК» и добавляем отчет. Нажимаем 
«Добавить» → «ОК».

В задании могут попросить указать за какой-то промежуток времени, 
переходим в «Фильтрация сертификатов». Ставим галочки на «Начало» и 
«Окончание».

Если в указанной нами папке для сохранения отчетов, появился сам 
отчет вместе с сертификатами, то задание выполнено успешно.


________________________

Заходим в ранее установленный CA Informing на ВМ Net1-AdminCA. 
Для начала настроим его, нажимаем «Действия» → «Настройки».

Заполняем: 
|Сохранять в папку – C:\Users\Admin\Documents\CaInformingEmails
|Любой корректный адрес электронной почты отправителя:
|Имя:
|Любой корректный адрес электронной почты для отправки уведомлений:
|Строка подключения: Data Source=<ваш ip бд>\winnccsql;Initial
|Catalog=ViPNetAdministrator;User Id=sa;Password=xxXX1234;
|Путь сохранения отчетов: C:\Users\Admin\Documents\CaInformingReports
|После заполнения нажимаем «ОК» и добавляем отчет. Нажимаем 
|«Добавить» → «ОК».
В задании могут попросить указать за какой-то промежуток времени, 
переходим в «Фильтрация сертификатов». Ставим галочки на «Начало» и 
«Окончание».

__________________________

ВАЖНО!!! При любом изменении структуры сети ЦУСу потребуются 
справочники, а также возможно и ключи. Ключи (не путать с дистрибутивами 
ключей) создаем в УКЦ и отправляем в ЦУС, после чего отправляем 
справочники вместе с ключами на узлы.
Создаем новый сетевой узел и пользователя точно также как и при 
создании самой структуры сети. Выдаем новый дистрибутив ключей для 
сетевого узла «Пользователь_2 Филиал», так как у нас нет дистрибутива для 
нашего нового пользователя.
После выполнения заданий, потребуется проверить добавления 
пользователей и узлов.
Проверяем появление узла.
Устанавливаем новые ключи для нашего созданного пользователя и 
заходим в ViPNet Client.
С любого сетевого узла заходим в деловую почту. Нажимаем «Создать 
новое письмо» → «Получатели». Дважды нажимаем по пользователю, 
которому хотим отправить письмо, после чего кликаем «ОК».
Задаем название темы и заполняем содержимое письма для отправки. 
Нажимаем «Отправить» → «ОК».
Заходим на деловую почту нашего нового пользователя для проверки 
наличия письма. После некоторого времени письмо дошло до нашего клиента.
Осталось проверить отправку текстового сообщения в ViPNet Client.
Заходим в ViPNet Client, нажимаем в левом углу «Сообщение». Если в 
получателях нет пользователя, добавляем его, нажав «Добавить» → Выбрать».
Заполняем содержимое текстового сообщения и нажимаем «Отправить». 
Переходим к ViPNet Client нашего нового пользователя и проверяем 
сообщение.

Про УКЦ:
https://youtu.be/S2mikYR-3Hc?si=J8vcwLcPMxH-3DWm



